<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>WebBro Settings</title>
  <style>
    body { font-family: sans-serif; padding: 20px; background: #f4f4f4; }
    h1 { margin-bottom: 10px; }
    section { margin-bottom: 20px; padding: 10px; border: 1px solid #ccc; border-radius: 5px; background: #fff; }
    button { margin: 5px; padding: 5px 10px; cursor: pointer; }
    input, select { margin: 5px 0; padding: 5px; width: 100%; box-sizing: border-box; }
    label { display: block; margin-top: 10px; }
    #dev-mode-content { display: none; }
    textarea { width: 100%; height: 100px; margin-top: 5px; }
  </style>
</head>
<body>
  <h1>WebBro Settings</h1>

  <!-- Theme selection -->
  <section>
    <h2>Themes</h2>
    <button onclick="setTheme('light')">Light</button>
    <button onclick="setTheme('dark')">Dark</button>
  </section>

  <!-- Dev Mode -->
  <section>
    <h2>Developer Mode</h2>
    <label>
      <input type="checkbox" id="devModeToggle" onchange="toggleDevMode(this.checked)">
      Enable Dev Mode
    </label>

    <div id="dev-mode-content">
      <label>Site URL (your custom domain):</label>
      <input type="text" id="site-url" placeholder="example@webbro">

      <label>Upload Files (.html, .js, .cs):</label>
      <input type="file" id="file-upload" multiple>

      <button onclick="createSite()">Create Site</button>

      <h3>Existing Sites</h3>
      <ul id="site-list"></ul>
    </div>
  </section>

  <script>
    // Theme selection
    function setTheme(theme) {
      window.electronAPI.changeTheme(theme);
    }

    // Dev mode toggle
    function toggleDevMode(enabled) {
      document.getElementById('dev-mode-content').style.display = enabled ? 'block' : 'none';
    }

    // Load existing sites from sitelogs.js
    function loadSites() {
      window.electronAPI.getSiteLogs((sites) => {
        const list = document.getElementById('site-list');
        list.innerHTML = '';
        sites.forEach(site => {
          const li = document.createElement('li');
          li.textContent = `${site.domain} â†’ ${site.files.join(', ')}`;
          list.appendChild(li);
        });
      });
    }

    // Create a new site
    function createSite() {
      const domain = document.getElementById('site-url').value.trim();
      const files = [...document.getElementById('file-upload').files].map(f => f.path);
      if (!domain || files.length === 0) {
        alert('Please enter a domain and upload at least one file.');
        return;
      }
      window.electronAPI.createCustomSite(domain, files, (success) => {
        if (success) {
          alert(`Site "${domain}" created successfully!`);
          loadSites();
        } else {
          alert('Failed to create site. Check the console for details.');
        }
      });
    }

    // Initialize
    loadSites();
  </script>
</body>
</html>
